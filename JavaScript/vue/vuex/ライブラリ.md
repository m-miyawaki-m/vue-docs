Vuexã¯Vue.jsã®å…¬å¼çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€**ä¸­è¦æ¨¡ä»¥ä¸Šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±æœ‰ãƒ»ç®¡ç†**ã™ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€Vuexã‚’ä½¿ã„ã“ãªã™ãŸã‚ã«ã€Œæœ€ä½é™çŸ¥ã£ã¦ãŠãã¨å›°ã‚‰ãªã„é …ç›®ã€ã¨ã€**å­¦ç¿’ãƒ»è¨­è¨ˆãƒ»å®Ÿè£…ã®è¦³ç‚¹ã§é‡è¦ãªçŸ¥è­˜ãƒã‚¤ãƒ³ãƒˆ**ã§ã™ã€‚

---

## âœ… Vuexã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«çŸ¥ã£ã¦ãŠãã¹ãé …ç›®

### 1. **Vuexã®åŸºæœ¬æ§‹æˆ**

Vuexã®ã‚¹ãƒˆã‚¢ï¼ˆstoreï¼‰ã¯ä»¥ä¸‹ã®5ã¤ã®è¦ç´ ã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ï¼š

| è¦ç´             | èª¬æ˜                                |
| ------------- | --------------------------------- |
| **state**     | ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹çŠ¶æ…‹ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰                 |
| **getters**   | stateã‹ã‚‰æ´¾ç”Ÿã—ãŸå€¤ï¼ˆç®—å‡ºãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚ˆã†ãªã‚‚ã®ï¼‰       |
| **mutations** | stateã‚’åŒæœŸçš„ã«å¤‰æ›´ã™ã‚‹é–¢æ•°ï¼ˆå”¯ä¸€stateã‚’å¤‰æ›´ã§ãã‚‹å ´æ‰€ï¼‰ |
| **actions**   | éåŒæœŸå‡¦ç†ã‚’å«ã‚€ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¨˜è¿°ã—ã€mutationsã‚’å‘¼ã³å‡ºã™   |
| **modules**   | ã‚¹ãƒˆã‚¢ã‚’è¤‡æ•°ã®å°ã•ãªã‚¹ãƒˆã‚¢ã«åˆ†å‰²ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆï¼‰         |

---

### 2. **çŠ¶æ…‹å¤‰æ›´ã®æµã‚Œã‚’ç†è§£**

ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ¼ãŒåŸºæœ¬ã«ãªã‚Šã¾ã™ï¼š

```
Component â†’ dispatch(action) â†’ commit(mutation) â†’ update(state)
```

ä¾‹ï¼š

```js
// Componentã‹ã‚‰
this.$store.dispatch('fetchUserData')

// actions.js
actions: {
  async fetchUserData({ commit }) {
    const res = await axios.get('/api/user')
    commit('setUser', res.data)
  }
}

// mutations.js
mutations: {
  setUser(state, user) {
    state.user = user
  }
}
```

---

### 3. **ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ï¼ˆmodulesï¼‰**

å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã§ã¯ã€ã‚¹ãƒˆã‚¢ã‚’ç”»é¢ã‚„æ©Ÿèƒ½ã”ã¨ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²ã—ã¾ã™ã€‚

```js
modules: {
  auth: {
    namespaced: true,
    state: { token: '' },
    mutations: { setToken(...) { ... } }
  }
}
```

å‘¼ã³å‡ºã—ä¾‹ï¼ˆåå‰ç©ºé–“ã‚ã‚Šï¼‰ï¼š

```js
this.$store.dispatch('auth/login')
```

---

### 4. **mapç³»ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã®æ´»ç”¨**

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰Vuexã®stateã‚„getterã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼š

* `mapState`
* `mapGetters`
* `mapMutations`
* `mapActions`

ä¾‹ï¼ˆ`computed`ã§stateã‚’ãƒã‚¤ãƒ³ãƒ‰ï¼‰ï¼š

```js
computed: {
  ...mapState(['user']),
  ...mapGetters(['isLoggedIn']),
}
```

---

### 5. **æ°¸ç¶šåŒ–ï¼ˆVuex-PersistedStateãªã©ï¼‰**

çŠ¶æ…‹ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¦ã€ãƒšãƒ¼ã‚¸å†èª­ã¿è¾¼ã¿æ™‚ã«ã‚‚ä¿æŒã—ãŸã„å ´åˆã«åˆ©ç”¨ã—ã¾ã™ã€‚

```bash
npm install vuex-persistedstate
```

```js
import createPersistedState from 'vuex-persistedstate'
const store = new Vuex.Store({
  plugins: [createPersistedState()]
})
```

---

### 6. **éåŒæœŸå‡¦ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**

* actionsã§APIé€šä¿¡ãƒ»setTimeoutãªã©éåŒæœŸå‡¦ç†ã‚’è¡Œã„ã€mutationsã§stateã‚’å¤‰æ›´
* ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆtry-catchï¼‰ã‚’å¿˜ã‚Œãšã«

---

### 7. **ãƒ‡ãƒãƒƒã‚°æ–¹æ³•**

* [Vue Devtools](https://devtools.vuejs.org/)ã§Vuexã®çŠ¶æ…‹é·ç§»ã‚„ãƒˆãƒ¬ãƒ¼ã‚¹ãŒå¯èƒ½
* ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚°ã‚’è¿½ã„ã‚„ã™ã„

---

## ğŸ“Œ è£œè¶³ï¼šVuexã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨Vueã®é–¢ä¿‚

| Vueã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³   | æ¨å¥¨ã•ã‚Œã‚‹Vuex          |
| ----------- | ------------------ |
| Vue 2.x     | Vuex 3.x           |
| Vue 3.x     | Vuex 4.x           |
| å°†æ¥ï¼ˆVue 3ä»¥é™ï¼‰ | Piniaã¸ã®ç§»è¡ŒãŒæ¨å¥¨ã•ã‚Œã¤ã¤ã‚ã‚‹ |

---

## ğŸ” Piniaã¨ã®é•ã„ã‚‚æŠ¼ã•ãˆã¦ãŠãã¨â—

* Vuexã¯ã‚³ãƒ¼ãƒ‰é‡ãŒå¤šããªã‚ŠãŒã¡
* Piniaã¯TypeScriptã¨ã®ç›¸æ€§ãŒè‰¯ãã€Composition APIã¨è‡ªç„¶ã«çµ±åˆã§ãã‚‹
* æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯PiniaãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹

---

## ğŸ”š ã¾ã¨ã‚ï¼šã“ã‚Œã‚’çŸ¥ã£ã¦ã„ã‚Œã°å›°ã‚‰ãªã„

| ã‚«ãƒ†ã‚´ãƒª      | ãƒã‚§ãƒƒã‚¯é …ç›®                                            |
| --------- | ------------------------------------------------- |
| åŸºæœ¬æ§‹æˆ      | state, getters, mutations, actions, modules       |
| å‡¦ç†ã®æµã‚Œ     | dispatch â†’ commit â†’ stateæ›´æ–°                       |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ¥ç¶š | mapState / mapGetters / mapMutations / mapActions |
| ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²   | `namespaced: true` ã®ä½¿ã„æ–¹                           |
| çŠ¶æ…‹ã®æ°¸ç¶šåŒ–    | vuex-persistedstateã®å°å…¥                            |
| éåŒæœŸå‡¦ç†     | actionsã§APIé€šä¿¡ã€try-catchå¿…é ˆ                         |
| é–‹ç™ºæ”¯æ´      | Vue Devtoolsã§ã®ç¢ºèªæ–¹æ³•                                |
| å°†æ¥æ€§       | Piniaã¨ã®é•ã„ã¨ç§»è¡Œåˆ¤æ–­åŸºæº–                                  |

---

Vuexã®æ§‹é€ ã‚„å°å…¥åˆ¤æ–­ã§æ‚©ã‚“ã§ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Œã°ã€ãã“ã‚’æ·±æ˜ã‚Šã§ãã¾ã™ã€‚æ°—ã«ãªã‚‹ç‚¹ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ


Vuexã®æ§‹é€ ã‚’ç†è§£ã™ã‚‹ã“ã¨ã¯ã€çŠ¶æ…‹ç®¡ç†ã‚’é©åˆ‡ã«è¨­è¨ˆãƒ»å®Ÿè£…ã™ã‚‹ä¸Šã§éå¸¸ã«é‡è¦ã§ã™ã€‚ã“ã“ã§ã¯ã€Vuexã®åŸºæœ¬çš„ãªæ§‹é€ ã‚’ã€Œå…¨ä½“æ§‹æˆã€ã¨ã€Œãã‚Œãã‚Œã®è¦ç´ ã®å½¹å‰²ãƒ»ä¾‹ã€ã§è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ— Vuexã®æ§‹é€ å…¨ä½“

Vuexã¯å¤§ããä»¥ä¸‹ã®5ã¤ã®è¦ç´ ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Components  â”‚ â† ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Actions      â”‚ â† éåŒæœŸå‡¦ç†
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ commit
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mutations     â”‚ â† çŠ¶æ…‹ã®å¤‰æ›´ï¼ˆåŒæœŸï¼‰
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    State       â”‚ â† ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â–²
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Getters      â”‚ â† stateã®æ´¾ç”Ÿæƒ…å ±ï¼ˆcomputedçš„å½¹å‰²ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” å„æ§‹æˆè¦ç´ ã®è©³ç´°ã¨ã‚³ãƒ¼ãƒ‰ä¾‹

### 1. **stateï¼ˆçŠ¶æ…‹ï¼‰**

ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã€‚

```js
const state = {
  count: 0,
  user: null
}
```

---

### 2. **gettersï¼ˆæ´¾ç”ŸçŠ¶æ…‹ï¼‰**

stateã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹æ´¾ç”Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆ`computed`ã®ã‚ˆã†ãªå½¹å‰²ï¼‰ã€‚

```js
const getters = {
  isLoggedIn: state => !!state.user,
  doubleCount: state => state.count * 2
}
```

---

### 3. **mutationsï¼ˆçŠ¶æ…‹å¤‰æ›´ï¼šåŒæœŸï¼‰**

stateã‚’**å”¯ä¸€**å¤‰æ›´ã§ãã‚‹æ‰‹æ®µã€‚**åŒæœŸå‡¦ç†ã®ã¿**ã€‚

```js
const mutations = {
  increment(state) {
    state.count++
  },
  setUser(state, user) {
    state.user = user
  }
}
```

---

### 4. **actionsï¼ˆå‡¦ç†ï¼šéåŒæœŸï¼‰**

APIå‘¼ã³å‡ºã—ãªã©**éåŒæœŸå‡¦ç†**ã‚’è¡Œã„ã€mutationã‚’`commit`ã™ã‚‹ã€‚

```js
const actions = {
  async fetchUser({ commit }) {
    const res = await axios.get('/api/user')
    commit('setUser', res.data)
  }
}
```

---

### 5. **modulesï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰**

ã‚¹ãƒˆã‚¢ã‚’**æ©Ÿèƒ½ã”ã¨ã«åˆ†å‰²**ã—ã¦æ§‹æˆã§ãã‚‹ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã”ã¨ã«state, getters, mutations, actionsã‚’å®šç¾©ã€‚

```js
const authModule = {
  namespaced: true,
  state: () => ({ token: null }),
  mutations: { setToken(state, token) { state.token = token } },
  actions: { login({ commit }, token) { commit('setToken', token) } }
}

const store = new Vuex.Store({
  modules: {
    auth: authModule
  }
})
```

---

## ğŸ§© Storeå…¨ä½“ã®å®šç¾©ï¼ˆçµ±åˆï¼‰

å…¨ã¦ã‚’1ã¤ã®ã‚¹ãƒˆã‚¢ã«ã¾ã¨ã‚ã‚‹ï¼š

```js
import Vue from 'vue'
import Vuex from 'vuex'
Vue.use(Vuex)

export default new Vuex.Store({
  state,
  getters,
  mutations,
  actions,
  modules
})
```

---

## ğŸ§  Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã®ä½¿ã„æ–¹ï¼ˆä¾‹ï¼‰

```vue
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">+1</button>
  </div>
</template>

<script>
import { mapState, mapMutations } from 'vuex'

export default {
  computed: {
    ...mapState(['count'])
  },
  methods: {
    ...mapMutations(['increment'])
  }
}
</script>
```

---

## ğŸ“¦ è£œè¶³ï¼š`store/index.js` ã®æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãŠã™ã™ã‚ï¼‰

```sh
store/
â”œâ”€â”€ index.js         â† ã‚¹ãƒˆã‚¢å…¨ä½“ã‚’çµ„ã¿ç«‹ã¦ã‚‹
â”œâ”€â”€ state.js
â”œâ”€â”€ getters.js
â”œâ”€â”€ mutations.js
â”œâ”€â”€ actions.js
â””â”€â”€ modules/
    â”œâ”€â”€ auth.js
    â””â”€â”€ user.js
```

ã“ã‚Œã«ã‚ˆã‚Šã€å¤§è¦æ¨¡åŒ–ã—ã¦ã‚‚ä¿å®ˆã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

---

## ğŸ“Œ ã¾ã¨ã‚ï¼šVuexæ§‹é€ ãƒã‚¤ãƒ³ãƒˆ

| è¦ç´         | å½¹å‰²             | ç‰¹å¾´                    |
| --------- | -------------- | --------------------- |
| state     | ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿      | å˜ä¸€ã®ã‚½ãƒ¼ã‚¹                |
| getters   | æ´¾ç”ŸçŠ¶æ…‹           | computedã¨ä¼¼ã¦ã„ã‚‹         |
| mutations | çŠ¶æ…‹ã®**åŒæœŸ**å¤‰æ›´    | `commit()`ã§å‘¼ã³å‡ºã™       |
| actions   | éåŒæœŸå‡¦ç† + commit | `dispatch()`ã§å‘¼ã³å‡ºã™     |
| modules   | ã‚¹ãƒˆã‚¢ã®åˆ†å‰²         | `namespaced: true`ãŒé‡è¦ |

---

å¿…è¦ã§ã‚ã‚Œã°ã€**Vuexã§ã®APIè¨­è¨ˆã®ã‚³ãƒ„**ã‚„ã€**Piniaã¨ã®æ§‹é€ æ¯”è¼ƒ**ã‚‚ã§ãã¾ã™ã€‚ã©ã“ã‚’ã•ã‚‰ã«æ·±æ˜ã‚Šã—ã¾ã™ã‹ï¼Ÿ

Vuexã§APIã‚’æ‰±ã†éš›ã¯ã€**éåŒæœŸå‡¦ç†ã®ç®¡ç†ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»UIã¨ã®é€£æº**ã‚’æ„è­˜ã—ã¦è¨­è¨ˆã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ã“ã“ã§ã¯ã€ŒVuexã‚’ä½¿ã£ãŸAPIè¨­è¨ˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ã‚’ã€**è¨­è¨ˆæ–¹é‡ãƒ»æ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»å®Ÿè£…ä¾‹**ã®é †ã«ã‚ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ã¾ã™ã€‚

---

## âœ… 1. è¨­è¨ˆæ–¹é‡ï¼ˆVuex + APIï¼‰

| è¨­è¨ˆé …ç›®              | ãƒã‚¤ãƒ³ãƒˆ                             |
| ----------------- | -------------------------------- |
| **éåŒæœŸå‡¦ç†ã®å ´æ‰€**      | `actions` ã«é›†ç´„ï¼ˆ`axios`ã‚„`fetch`ãªã©ï¼‰ |
| **çŠ¶æ…‹ã®å¤‰æ›´ç®‡æ‰€**       | `mutations` ã®ã¿ã§ `state` ã‚’å¤‰æ›´      |
| **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**     | actionså†…ã§ `try-catch` ã‚’å¿…ãšè¡Œã†      |
| **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç®¡ç†**      | `isLoading` ãªã©ã‚’stateã«æŒã¡UIã«åæ˜      |
| **APIã”ã¨ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²** | ä¾‹: `auth`, `user`, `products`    |

---

## ğŸ§± 2. åŸºæœ¬æ§‹æˆï¼ˆauth APIãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¾‹ï¼‰

```
store/
â”œâ”€â”€ index.js
â””â”€â”€ modules/
    â””â”€â”€ auth.js
```

### `auth.js`

```js
import axios from 'axios'

export default {
  namespaced: true,
  state: () => ({
    user: null,
    token: null,
    isLoading: false,
    error: null,
  }),
  mutations: {
    setUser(state, user) {
      state.user = user
    },
    setToken(state, token) {
      state.token = token
    },
    setLoading(state, isLoading) {
      state.isLoading = isLoading
    },
    setError(state, error) {
      state.error = error
    }
  },
  actions: {
    async login({ commit }, credentials) {
      commit('setLoading', true)
      commit('setError', null)
      try {
        const res = await axios.post('/api/login', credentials)
        commit('setUser', res.data.user)
        commit('setToken', res.data.token)
      } catch (err) {
        commit('setError', err.response?.data?.message || 'Login failed')
      } finally {
        commit('setLoading', false)
      }
    },
    logout({ commit }) {
      commit('setUser', null)
      commit('setToken', null)
    }
  },
  getters: {
    isAuthenticated: state => !!state.token,
    currentUser: state => state.user,
    loading: state => state.isLoading,
    errorMessage: state => state.error
  }
}
```

---

## ğŸ¯ 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ã„æ–¹

```vue
<template>
  <div>
    <form @submit.prevent="handleLogin">
      <input v-model="email" />
      <input v-model="password" type="password" />
      <button :disabled="loading">ãƒ­ã‚°ã‚¤ãƒ³</button>
    </form>
    <p v-if="error">{{ error }}</p>
  </div>
</template>

<script>
import { mapState, mapActions } from 'vuex'

export default {
  data() {
    return {
      email: '',
      password: ''
    }
  },
  computed: {
    ...mapState('auth', ['isLoading', 'error']),
    loading() { return this.isLoading },
  },
  methods: {
    ...mapActions('auth', ['login']),
    handleLogin() {
      this.login({ email: this.email, password: this.password })
    }
  }
}
</script>
```

---

## ğŸš¦ 4. ã‚ˆãã‚ã‚‹æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

| ç›®çš„           | æ–¹æ³•                                                   |
| ------------ | ---------------------------------------------------- |
| ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…±é€šè¨­å®š    | `axios.defaults.headers.common['Authorization']` ã«è¨­å®š |
| ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³å¯¾å¿œ | ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™ã‚’stateã§ä¿æŒã—ã€å®šæœŸæ›´æ–°                              |
| ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã§ã®åˆ†å²   | `error.response.status === 401` ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ãªã©           |
| ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®æ°¸ç¶šåŒ–   | `vuex-persistedstate` ã§stateã‚’localStorageã«ä¿å­˜         |

---

## ğŸ§  5. è£œè¶³ï¼šAPIè¨­è¨ˆã«ãŠã‘ã‚‹Vuexã®å½¹å‰²

| å‡¦ç†ç¨®åˆ¥     | Vuexã§æ‹…å½“ã™ã‚‹éƒ¨åˆ†                  | èª¬æ˜              |
| -------- | ---------------------------- | --------------- |
| **å–å¾—**   | `actions` â†’ APIå‘¼ã³å‡ºã— + commit |                 |
| **ä¿å­˜**   | `mutations` â†’ stateæ›´æ–°        |                 |
| **èª­ã¿å–ã‚Š** | `getters`                    | UIå‘ã‘ã«åŠ å·¥ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æä¾› |
| **UIåˆ¶å¾¡** | `state` â†’ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ç­‰        | ç”»é¢å´ã«çŠ¶æ…‹ã‚’ä¼ãˆã‚‹      |

---

## ğŸ§° 6. axiosã®å…±é€šè¨­å®šä¾‹ï¼ˆpluginåŒ–ï¼‰

```js
// plugins/axios.js
import axios from 'axios'

const instance = axios.create({
  baseURL: '/api',
  timeout: 5000
})

instance.interceptors.request.use(config => {
  const token = localStorage.getItem('token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

export default instance
```

Vuexã®`actions`å†…ã§ã“ã®axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½¿ãˆã°ã€æ¯å›è¨­å®šã‚’æ›¸ã‹ãšã«æ¸ˆã¿ã¾ã™ã€‚

---

## ğŸ“Œ ã¾ã¨ã‚ï¼šVuexã§ã®APIè¨­è¨ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

| âœ… é …ç›®                            | èª¬æ˜             |
| ------------------------------- | -------------- |
| `actions` ã« APIé€šä¿¡ã‚’ã¾ã¨ã‚ã‚‹          | éåŒæœŸãƒ­ã‚¸ãƒƒã‚¯ã‚’ä¸€å…ƒç®¡ç†   |
| `mutations` ã§çŠ¶æ…‹å¤‰æ›´               | å˜ä¸€è²¬ä»»åŸå‰‡ã‚’ä¿ã¤      |
| `state` ã§ isLoading ã‚„ error ã‚’ä¿æŒ | UIåˆ¶å¾¡ãŒæ˜ç¢ºã«ãªã‚‹     |
| `modules` ã§APIã”ã¨ã«åˆ†å‰²             | ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãŒé«˜ããªã‚‹  |
| `getters` ã§æ´¾ç”Ÿãƒ‡ãƒ¼ã‚¿ç®¡ç†              | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã™ã£ãã‚Šã™ã‚‹ |
| axioså…±é€šåŒ– & ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†               | å†åˆ©ç”¨æ€§ãƒ»ä¿å®ˆæ€§ãŒå‘ä¸Šã™ã‚‹  |

---

å¿…è¦ã§ã‚ã‚Œã°ã€ã€ŒCRUD APIã‚’Vuexã§ä¸€æ‹¬ç®¡ç†ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚„ã€ŒPiniaã§ã®APIè¨­è¨ˆã¨ã®æ¯”è¼ƒã€ã‚‚æä¾›å¯èƒ½ã§ã™ã€‚ã©ã¡ã‚‰ã‚’æ·±æ˜ã‚Šã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ

Vuexã§**CRUD APIï¼ˆCreate, Read, Update, Deleteï¼‰ã‚’ä¸€æ‹¬ç®¡ç†ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³**ã¯ã€ä¸­è¦æ¨¡ä»¥ä¸Šã®ã‚¢ãƒ—ãƒªã§ã¨ã¦ã‚‚å½¹ç«‹ã¡ã¾ã™ã€‚ã“ã“ã§ã¯ã€**APIç®¡ç†ã‚’å…±é€šåŒ–ãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã™ã‚‹å®Ÿè·µçš„ãªæ§‹æˆãƒ‘ã‚¿ãƒ¼ãƒ³**ã‚’æç¤ºã—ã€å„CRUDæ“ä½œã‚’Vuexã§ã©ã†æ‰±ã†ã‹ã‚’å…·ä½“çš„ã«è§£èª¬ã—ã¾ã™ã€‚

---

## ğŸ”§ Vuex CRUD API ç®¡ç†ã®å…¨ä½“æ§‹æˆ

```
store/
â”œâ”€â”€ index.js
â””â”€â”€ modules/
    â””â”€â”€ items.js      â† ä¸€è¦§ãƒ»è¿½åŠ ãƒ»æ›´æ–°ãƒ»å‰Šé™¤ã‚’æ‹…å½“
```

å¯¾è±¡ã¨ã™ã‚‹APIã®ä¾‹ï¼š

| æ“ä½œ   | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ          | ãƒ¡ã‚½ãƒƒãƒ‰      |
| ---- | ---------------- | --------- |
| ä¸€è¦§å–å¾— | `/api/items`     | GET       |
| è¿½åŠ    | `/api/items`     | POST      |
| æ›´æ–°   | `/api/items/:id` | PUT/PATCH |
| å‰Šé™¤   | `/api/items/:id` | DELETE    |

---

## ğŸ“¦ itemsãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…ï¼ˆVuex 4ï¼‰

```js
// store/modules/items.js
import axios from 'axios'

export default {
  namespaced: true,
  state: () => ({
    items: [],
    isLoading: false,
    error: null
  }),
  mutations: {
    setItems(state, items) {
      state.items = items
    },
    addItem(state, item) {
      state.items.push(item)
    },
    updateItem(state, updatedItem) {
      const index = state.items.findIndex(i => i.id === updatedItem.id)
      if (index !== -1) state.items.splice(index, 1, updatedItem)
    },
    deleteItem(state, id) {
      state.items = state.items.filter(i => i.id !== id)
    },
    setLoading(state, value) {
      state.isLoading = value
    },
    setError(state, error) {
      state.error = error
    }
  },
  actions: {
    async fetchItems({ commit }) {
      commit('setLoading', true)
      try {
        const res = await axios.get('/api/items')
        commit('setItems', res.data)
      } catch (err) {
        commit('setError', err.message)
      } finally {
        commit('setLoading', false)
      }
    },
    async createItem({ commit }, newItem) {
      try {
        const res = await axios.post('/api/items', newItem)
        commit('addItem', res.data)
      } catch (err) {
        commit('setError', err.message)
      }
    },
    async updateItem({ commit }, item) {
      try {
        const res = await axios.put(`/api/items/${item.id}`, item)
        commit('updateItem', res.data)
      } catch (err) {
        commit('setError', err.message)
      }
    },
    async deleteItem({ commit }, id) {
      try {
        await axios.delete(`/api/items/${id}`)
        commit('deleteItem', id)
      } catch (err) {
        commit('setError', err.message)
      }
    }
  },
  getters: {
    allItems: state => state.items,
    getItemById: state => id => state.items.find(i => i.id === id),
    isLoading: state => state.isLoading,
    error: state => state.error
  }
}
```

---

## ğŸ§© store/index.js ã«ç™»éŒ²

```js
import { createStore } from 'vuex'
import items from './modules/items'

export default createStore({
  modules: {
    items
  }
})
```

---

## ğŸ’¡ UIå´ã§ã®ä½¿ã„æ–¹ä¾‹ï¼ˆä¸€è¦§ã¨è¿½åŠ ï¼‰

### ä¸€è¦§å–å¾—ï¼ˆmountedã§å‘¼ã³å‡ºã—ï¼‰

```vue
<script>
import { mapGetters, mapActions } from 'vuex'

export default {
  computed: {
    ...mapGetters('items', ['allItems', 'isLoading', 'error'])
  },
  created() {
    this.fetchItems()
  },
  methods: {
    ...mapActions('items', ['fetchItems'])
  }
}
</script>
```

---

### è¿½åŠ å‡¦ç†ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ï¼‰

```vue
<script>
import { mapActions } from 'vuex'

export default {
  data() {
    return {
      newItem: { name: '' }
    }
  },
  methods: {
    ...mapActions('items', ['createItem']),
    addItem() {
      this.createItem(this.newItem)
      this.newItem.name = ''
    }
  }
}
</script>
```

---

## ğŸ“Œ ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ¡ãƒªãƒƒãƒˆ

| ãƒã‚¤ãƒ³ãƒˆ      | èª¬æ˜                                            |
| --------- | --------------------------------------------- |
| âœ… å½¹å‰²åˆ†é›¢ãŒæ˜ç¢º | `actions`: é€šä¿¡, `mutations`: æ›´æ–°, `state`: çŠ¶æ…‹ä¿æŒ |
| âœ… UIãŒã™ã£ãã‚Š | ç”»é¢å´ã§ã¯Vuexã‚’å‘¼ã¶ã ã‘ã§ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãŒå®Œçµ                       |
| âœ… å†åˆ©ç”¨æ€§ãŒé«˜ã„ | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å˜ä½ã§ä»–ã®ãƒªã‚¹ãƒˆè¡¨ç¤ºã«ã‚‚å¿œç”¨å¯èƒ½                         |
| âœ… ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«  | è¤‡æ•°ãƒªã‚½ãƒ¼ã‚¹ï¼ˆusers, postsãªã©ï¼‰ã‚’è¿½åŠ ã—ã‚„ã™ã„                 |

---

## ğŸ›  æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

* âœ… ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼šstateã«`page`, `limit`, `totalCount`ãªã©è¿½åŠ 
* âœ… ä¸¦ã³æ›¿ãˆå¯¾å¿œï¼šquery paramç®¡ç†
* âœ… ãƒ•ã‚£ãƒ«ã‚¿å¯¾å¿œï¼šstateã«filteræ¡ä»¶ã‚’è¿½åŠ 
* âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å›½éš›åŒ–ï¼ši18nã¨é€£æº
* âœ… APIå‘¼ã³å‡ºã—ã‚’serviceå±¤ã«åˆ†é›¢ï¼ˆ`services/itemService.js`ãªã©ï¼‰

---

## âœ¨ ã¾ã¨ã‚ï¼šVuexã§ã®CRUD APIè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

| æ“ä½œ     | `actions`    | `mutations`  | `state`      |
| ------ | ------------ | ------------ | ------------ |
| Create | `createItem` | `addItem`    | `items`é…åˆ—ã«è¿½åŠ  |
| Read   | `fetchItems` | `setItems`   | ä¸€è¦§ãƒ‡ãƒ¼ã‚¿        |
| Update | `updateItem` | `updateItem` | å¯¾è±¡ã‚’ä¸Šæ›¸ã       |
| Delete | `deleteItem` | `deleteItem` | å¯¾è±¡ã‚’é™¤å¤–        |

---

å¿…è¦ã«å¿œã˜ã¦ã€ã€Œserviceå±¤ï¼‹Vuexé€£æºãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚„ã€ŒPiniaã§åŒã˜æ§‹æˆã‚’ä½œã‚‹æ–¹æ³•ã€ã‚‚ç´¹ä»‹ã§ãã¾ã™ã€‚èˆˆå‘³ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

ã€Œ**serviceå±¤ + Vuexé€£æºãƒ‘ã‚¿ãƒ¼ãƒ³**ã€ã¯ã€Vuexã®`actions`ã«**ç›´æ¥APIãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›¸ã‹ãš**ã«ã€APIå‘¼ã³å‡ºã—ã‚’**åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆserviceï¼‰ã«åˆ†é›¢**ã—ã¦ç®¡ç†ã™ã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãª**ä¿å®ˆæ€§ãƒ»å†åˆ©ç”¨æ€§ãƒ»ãƒ†ã‚¹ãƒˆæ€§ã®å‘ä¸Š**ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

---

## ğŸ” ãªãœ service å±¤ã‚’ä½œã‚‹ã®ã‹ï¼Ÿ

| èª²é¡Œ                 | serviceå±¤å°å…¥ã§ã®è§£æ±º  |
| ------------------ | --------------- |
| Vuex actionsãŒè‚¥å¤§åŒ–ã™ã‚‹ | APIå‘¼ã³å‡ºã—éƒ¨åˆ†ã‚’åˆ†é›¢ã§ãã‚‹ |
| åŒã˜APIã‚’è¤‡æ•°ç®‡æ‰€ã§ä½¿ã†      | serviceã‚’å†åˆ©ç”¨å¯èƒ½   |
| å˜ä½“ãƒ†ã‚¹ãƒˆãŒã—ã¥ã‚‰ã„         | APIãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ¢ãƒƒã‚¯åŒ–ã§ãã‚‹ |
| axiosã®ç´°ã‹ã„è¨­å®šãŒåˆ†æ•£ã™ã‚‹   | ä¸€æ‹¬ç®¡ç†ã§ãã‚‹         |

---

## ğŸ“¦ æ§‹æˆã‚¤ãƒ¡ãƒ¼ã‚¸

```
src/
â”œâ”€â”€ store/
â”‚   â””â”€â”€ modules/
â”‚       â””â”€â”€ items.js          â† Vuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ services/
â”‚   â””â”€â”€ itemService.js        â† APIé€šä¿¡ãƒ­ã‚¸ãƒƒã‚¯
```

---

## ğŸ§± 1. `services/itemService.js`

```js
import axios from 'axios'

const BASE_URL = '/api/items'

export default {
  async fetchAll() {
    const res = await axios.get(BASE_URL)
    return res.data
  },
  async create(item) {
    const res = await axios.post(BASE_URL, item)
    return res.data
  },
  async update(item) {
    const res = await axios.put(`${BASE_URL}/${item.id}`, item)
    return res.data
  },
  async remove(id) {
    await axios.delete(`${BASE_URL}/${id}`)
  }
}
```

---

## ğŸ§© 2. `store/modules/items.js`ï¼ˆVuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰

```js
import itemService from '@/services/itemService'

export default {
  namespaced: true,
  state: () => ({
    items: [],
    isLoading: false,
    error: null
  }),
  mutations: {
    setItems(state, items) {
      state.items = items
    },
    addItem(state, item) {
      state.items.push(item)
    },
    updateItem(state, updated) {
      const i = state.items.findIndex(i => i.id === updated.id)
      if (i !== -1) state.items.splice(i, 1, updated)
    },
    deleteItem(state, id) {
      state.items = state.items.filter(i => i.id !== id)
    },
    setLoading(state, bool) {
      state.isLoading = bool
    },
    setError(state, err) {
      state.error = err
    }
  },
  actions: {
    async fetchItems({ commit }) {
      commit('setLoading', true)
      try {
        const data = await itemService.fetchAll()
        commit('setItems', data)
      } catch (e) {
        commit('setError', e.message)
      } finally {
        commit('setLoading', false)
      }
    },
    async createItem({ commit }, item) {
      try {
        const newItem = await itemService.create(item)
        commit('addItem', newItem)
      } catch (e) {
        commit('setError', e.message)
      }
    },
    async updateItem({ commit }, item) {
      try {
        const updated = await itemService.update(item)
        commit('updateItem', updated)
      } catch (e) {
        commit('setError', e.message)
      }
    },
    async deleteItem({ commit }, id) {
      try {
        await itemService.remove(id)
        commit('deleteItem', id)
      } catch (e) {
        commit('setError', e.message)
      }
    }
  }
}
```

---

## âœ… ãƒ¡ãƒªãƒƒãƒˆã®å†ç¢ºèª

| ãƒ¡ãƒªãƒƒãƒˆ    | èª¬æ˜                               |
| ------- | -------------------------------- |
| ğŸ” å†åˆ©ç”¨  | åŒã˜APIã‚’è¤‡æ•°ã®Vuexã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ä½¿ã„å›ã›ã‚‹      |
| ğŸ”’ ä¿å®ˆæ€§  | axiosã®è¨­å®šãƒ»å¤‰æ›´ãŒ1ãƒ•ã‚¡ã‚¤ãƒ«ã«é›†ç´„ã•ã‚Œã¦ã„ã‚‹        |
| ğŸ§ª ãƒ†ã‚¹ãƒˆæ€§ | Vuexã‹ã‚‰åˆ‡ã‚Šé›¢ã—ã¦ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒã—ã‚„ã™ã„          |
| â™» æ©Ÿèƒ½è¿½åŠ   | APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚„ãƒˆãƒ¼ã‚¯ãƒ³åˆ¶å¾¡ãªã©ã‚‚serviceã§å¸åå¯èƒ½ |

---

## ğŸ’¡ ã‚ˆãã‚ã‚‹è¿½åŠ ã‚¢ã‚¤ãƒ‡ã‚¢

| æ©Ÿèƒ½           | æ–¹æ³•                                |
| ------------ | --------------------------------- |
| å…±é€šã‚¨ãƒ©ãƒ¼å‡¦ç†      | serviceå±¤ã«`try-catch`ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ç”¨æ„       |
| èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³è‡ªå‹•ä»˜ä¸   | axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«interceptorã‚’è¨­å®š        |
| APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ†é›¢  | `BASE_URL = /api/v1/items` ã®ã‚ˆã†ã«å®šç¾© |
| ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãªã© | serviceã§FormDataã‚’æ§‹ç¯‰ã™ã‚‹             |

---

## ğŸ§  è£œè¶³ï¼šPiniaã§ã¯ã©ã†ãªã‚‹ï¼Ÿ

Piniaã§ã¯Composition APIçš„ã«ã€serviceã¨storeã®é€£æºã¯ã‚‚ã£ã¨è‡ªç„¶ã«ã§ãã¾ã™ï¼ˆä¾‹ï¼šstoreå†…ã§`useItemService()`ã‚’å‘¼ã¶ãªã©ï¼‰ã€‚
Vuexã§ã¯å½¹å‰²ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§ä¼¼ãŸæ§‹é€ ã«ã§ãã¾ã™ã€‚

---

## ğŸ“Œ ã¾ã¨ã‚

| é …ç›® | å†…å®¹                                       |
| -- | ---------------------------------------- |
| å¯¾è±¡ | è¤‡é›‘ãªAPIãƒ­ã‚¸ãƒƒã‚¯ or å†åˆ©ç”¨ã—ãŸã„APIé€šä¿¡å‡¦ç†              |
| æ–¹æ³• | APIãƒ­ã‚¸ãƒƒã‚¯ã‚’`services/*.js`ã«ã¾ã¨ã‚ã€Vuexã§ã¯çµæœã ã‘æ‰±ã† |
| åŠ¹æœ | Vuexã®è‚¥å¤§åŒ–é˜²æ­¢ã€å†åˆ©ç”¨æ€§UPã€ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã•UP              |

---

ã€Œä¸€è¦§ãƒ»è©³ç´°ãƒ»æ¤œç´¢ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãç™»éŒ²ã€ãªã©ã®**å¿œç”¨CRUDãƒ‘ã‚¿ãƒ¼ãƒ³**ãŒã‚ã‚Œã°ã€ãã‚Œã«ç‰¹åŒ–ã—ãŸæ§‹æˆã‚‚ææ¡ˆã§ãã¾ã™ã€‚ã©ã†ã—ã¾ã™ã‹ï¼Ÿ
