äº†è§£ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã¯ã€ã‚ãªãŸã®2æ®µã‚¿ãƒ–æ§‹æˆï¼ˆè¦ªã‚¿ãƒ–ï¼ãƒšãƒ¼ã‚¸åˆ‡æ›¿ã€å­ã‚¿ãƒ–ï¼ãƒšãƒ¼ã‚¸å†…åˆ‡æ›¿ï¼‰ã«å®Œå…¨å¯¾å¿œã—ãŸ**Vue + Vuexï¼ˆOption APIæ§‹æ–‡ãƒ»TypeScriptï¼‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€å¼**ã§ã™ã€‚

---

## ğŸ“ æ§‹æˆ

```
src/
â”œâ”€ store/
â”‚  â”œâ”€ modules/
â”‚  â”‚  â””â”€ tabModule.ts      â† Vuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚  â””â”€ index.ts             â† ã‚¹ãƒˆã‚¢ç™»éŒ²
â”œâ”€ components/
â”‚  â”œâ”€ MainLayout.vue       â† å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ã«2æ®µã‚¿ãƒ–ï¼‰
â”‚  â””â”€ TabContent.vue       â† å­ã‚¿ãƒ–ã”ã¨ã®åˆ‡ã‚Šæ›¿ãˆè¡¨ç¤º
```

---

## ğŸ§© `store/modules/tabModule.ts`

```ts
export interface TabState {
  activeParentTab: string;
  activeChildTabs: Record<string, string>;
}

export const tabModule = {
  namespaced: true,
  state: (): TabState => ({
    activeParentTab: 'ä½œæˆ¦A',
    activeChildTabs: {
      ä½œæˆ¦A: 'ã‚°ãƒ©ãƒ•',
      ä½œæˆ¦B: 'ã‚³ãƒ¡ãƒ³ãƒˆ',
      ä½œæˆ¦C: 'ç·¨é›†'
    }
  }),

  mutations: {
    setParentTab(state: TabState, parent: string) {
      state.activeParentTab = parent;
    },
    setChildTab(state: TabState, payload: { parent: string; child: string }) {
      state.activeChildTabs[payload.parent] = payload.child;
    }
  },

  getters: {
    activeChildTab(state: TabState): string {
      return state.activeChildTabs[state.activeParentTab] || '';
    }
  }
};
```

---

## ğŸ§© `store/index.ts`

```ts
import { createStore } from 'vuex';
import { tabModule } from './modules/tabModule';

export default createStore({
  modules: {
    tabModule
  }
});
```

---

## ğŸ§© `components/MainLayout.vue`

```vue
<template>
  <v-app>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆ2æ®µã‚¿ãƒ–ï¼‰ -->
    <v-app-bar app flat>
      <!-- è¦ªã‚¿ãƒ– -->
      <v-tabs v-model="parentTab" grow>
        <v-tab v-for="item in parentTabs" :key="item">{{ item }}</v-tab>
      </v-tabs>
      <!-- å­ã‚¿ãƒ– -->
      <v-tabs v-model="childTab" grow>
        <v-tab v-for="item in childTabs" :key="item">{{ item }}</v-tab>
      </v-tabs>
    </v-app-bar>

    <!-- ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <v-main>
      <TabContent :parent="parentTab" :child="childTab" />
    </v-main>
  </v-app>
</template>

<script lang="ts">
import { defineComponent, computed } from 'vue';
import { useStore } from 'vuex';
import TabContent from './TabContent.vue';

export default defineComponent({
  components: { TabContent },
  setup() {
    const store = useStore();

    const parentTabs = ['ä½œæˆ¦A', 'ä½œæˆ¦B', 'ä½œæˆ¦C'];

    const childTabMap: Record<string, string[]> = {
      ä½œæˆ¦A: ['ã‚°ãƒ©ãƒ•', 'ã‚³ãƒ¡ãƒ³ãƒˆ', 'ç·¨é›†'],
      ä½œæˆ¦B: ['æ¦‚è¦', 'è­¦å‘Š', 'ç·¨é›†'],
      ä½œæˆ¦C: ['ãƒ­ã‚°', 'åœ°å›³', 'ç·¨é›†']
    };

    const parentTab = computed({
      get: () => store.state.tabModule.activeParentTab,
      set: (val) => store.commit('tabModule/setParentTab', val)
    });

    const childTab = computed({
      get: () => store.getters['tabModule/activeChildTab'],
      set: (val) =>
        store.commit('tabModule/setChildTab', {
          parent: store.state.tabModule.activeParentTab,
          child: val
        })
    });

    const childTabs = computed(() => childTabMap[parentTab.value] || []);

    return {
      parentTab,
      parentTabs,
      childTab,
      childTabs
    };
  }
});
</script>
```

---

## ğŸ§© `components/TabContent.vue`

```vue
<template>
  <div>
    <p>ç¾åœ¨ã®è¦ªã‚¿ãƒ–: {{ parent }}</p>
    <p>ç¾åœ¨ã®å­ã‚¿ãƒ–: {{ child }}</p>

    <component :is="currentComponent" />
  </div>
</template>

<script lang="ts">
import { defineComponent, computed } from 'vue';

export default defineComponent({
  props: {
    parent: String,
    child: String
  },
  components: {
    GraphView: { template: '<div>ğŸ“Š ã‚°ãƒ©ãƒ•</div>' },
    CommentView: { template: '<div>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ</div>' },
    EditView: { template: '<div>âœï¸ ç·¨é›†</div>' },
    OverviewView: { template: '<div>ğŸ“‹ æ¦‚è¦</div>' },
    AlertView: { template: '<div>âš ï¸ è­¦å‘Š</div>' },
    LogView: { template: '<div>ğŸ“„ ãƒ­ã‚°</div>' },
    MapView: { template: '<div>ğŸ—º åœ°å›³</div>' }
  },
  setup(props) {
    const resolveComponent = computed(() => {
      const { parent, child } = props;

      const map: Record<string, Record<string, string>> = {
        ä½œæˆ¦A: {
          ã‚°ãƒ©ãƒ•: 'GraphView',
          ã‚³ãƒ¡ãƒ³ãƒˆ: 'CommentView',
          ç·¨é›†: 'EditView'
        },
        ä½œæˆ¦B: {
          æ¦‚è¦: 'OverviewView',
          è­¦å‘Š: 'AlertView',
          ç·¨é›†: 'EditView'
        },
        ä½œæˆ¦C: {
          ãƒ­ã‚°: 'LogView',
          åœ°å›³: 'MapView',
          ç·¨é›†: 'EditView'
        }
      };

      return map[parent]?.[child] || 'div';
    });

    return {
      currentComponent: resolveComponent
    };
  }
});
</script>
```

---

## âœ… çµæœã¨ã—ã¦ã§ãã‚‹ã“ã¨

* è¦ªã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã‚‚ã€å­ã‚¿ãƒ–çŠ¶æ…‹ã¯Vuexã«è¨˜æ†¶ã•ã‚Œã€å¾©å…ƒã•ã‚Œã‚‹
* å­ã‚¿ãƒ–ã®å†…å®¹ï¼ˆã‚°ãƒ©ãƒ•ã€ã‚³ãƒ¡ãƒ³ãƒˆã€ç·¨é›†ãªã©ï¼‰ãŒãƒšãƒ¼ã‚¸å†…ã§å‹•çš„ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
* å°†æ¥ã€çŠ¶æ…‹å¾©å…ƒï¼ˆlocalStorageã‚„URLé€£å‹•ï¼‰ã«ã‚‚æ‹¡å¼µã—ã‚„ã™ã„æ§‹é€ 

---

## ğŸ§© è£œè¶³ï¼šå¸Œæœ›ãŒã‚ã‚Œã°

* `localStorageä¿å­˜å¯¾å¿œç‰ˆ`
* `URLã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿é€£å‹•ç‰ˆ`
* `Composition API å¤‰æ›ç‰ˆ`
* `TypeScriptã®interfaceã‚„enumé©ç”¨ç‰ˆ`

ãªã©ã‚‚è¿½åŠ å¯èƒ½ã§ã™ã€‚å¸Œæœ›ãŒã‚ã‚Œã°ã”æŒ‡å®šãã ã•ã„ï¼


ã§ã¯ã€å…ˆã»ã©ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã« **TypeScriptã® `interface` ã¨ `enum` ã‚’é©ç”¨ã—ãŸå®Œå…¨ç‰ˆ** ã‚’ã”æä¾›ã—ã¾ã™ã€‚

---

## âœ… æ”¹å–„ç‚¹ï¼ˆTypeScripté©ç”¨ã®è¦ç´ ï¼‰

| é …ç›®          | å†…å®¹                                              |
| ----------- | ----------------------------------------------- |
| `enum`      | è¦ªã‚¿ãƒ–ãƒ»å­ã‚¿ãƒ–åã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’åˆ—æŒ™å‹ã«ç½®æ›                          |
| `interface` | Vuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã® `state`, `payload` ã®å‹ã‚’æ˜ç¤ºåŒ–            |
| å‹å®‰å…¨         | `TabContent.vue` ã«ãŠã„ã¦ã‚‚ã€å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ `Record` å‹ã§åˆ¶é™ |

---

## ğŸ§© 1. `tabModule.ts`ï¼ˆVuexãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰

```ts
// è¦ªã‚¿ãƒ–åˆ—æŒ™
export enum ParentTab {
  A = 'ä½œæˆ¦A',
  B = 'ä½œæˆ¦B',
  C = 'ä½œæˆ¦C'
}

// å­ã‚¿ãƒ–åˆ—æŒ™ï¼ˆè¦ªåˆ¥ï¼‰
export enum ChildTabA {
  Graph = 'ã‚°ãƒ©ãƒ•',
  Comment = 'ã‚³ãƒ¡ãƒ³ãƒˆ',
  Edit = 'ç·¨é›†'
}
export enum ChildTabB {
  Overview = 'æ¦‚è¦',
  Alert = 'è­¦å‘Š',
  Edit = 'ç·¨é›†'
}
export enum ChildTabC {
  Log = 'ãƒ­ã‚°',
  Map = 'åœ°å›³',
  Edit = 'ç·¨é›†'
}

export interface TabState {
  activeParentTab: ParentTab;
  activeChildTabs: {
    [ParentTab.A]: ChildTabA;
    [ParentTab.B]: ChildTabB;
    [ParentTab.C]: ChildTabC;
  };
}

export const tabModule = {
  namespaced: true,
  state: (): TabState => ({
    activeParentTab: ParentTab.A,
    activeChildTabs: {
      [ParentTab.A]: ChildTabA.Graph,
      [ParentTab.B]: ChildTabB.Overview,
      [ParentTab.C]: ChildTabC.Log
    }
  }),
  mutations: {
    setParentTab(state: TabState, parent: ParentTab) {
      state.activeParentTab = parent;
    },
    setChildTab(
      state: TabState,
      payload: { parent: ParentTab; child: ChildTabA | ChildTabB | ChildTabC }
    ) {
      state.activeChildTabs[payload.parent] = payload.child as any;
    }
  },
  getters: {
    activeChildTab(state: TabState): string {
      return state.activeChildTabs[state.activeParentTab];
    }
  }
};
```

---

## ğŸ§© 2. `MainLayout.vue`ï¼ˆenumä½¿ç”¨ï¼‰

```ts
import { defineComponent, computed } from 'vue';
import { useStore } from 'vuex';
import {
  ParentTab,
  ChildTabA,
  ChildTabB,
  ChildTabC
} from '@/store/modules/tabModule';

export default defineComponent({
  setup() {
    const store = useStore();

    const parentTabs = Object.values(ParentTab);

    const childTabMap: Record<ParentTab, string[]> = {
      [ParentTab.A]: Object.values(ChildTabA),
      [ParentTab.B]: Object.values(ChildTabB),
      [ParentTab.C]: Object.values(ChildTabC)
    };

    const parentTab = computed({
      get: () => store.state.tabModule.activeParentTab,
      set: (val: ParentTab) => store.commit('tabModule/setParentTab', val)
    });

    const childTab = computed({
      get: () => store.getters['tabModule/activeChildTab'],
      set: (val: string) =>
        store.commit('tabModule/setChildTab', {
          parent: parentTab.value,
          child: val
        })
    });

    const childTabs = computed(() => childTabMap[parentTab.value]);

    return {
      parentTab,
      parentTabs,
      childTab,
      childTabs
    };
  }
});
```

---

## ğŸ§© 3. `TabContent.vue`ï¼ˆå‹ã‚’ä½¿ã£ã¦ãƒãƒƒãƒ—ç®¡ç†ï¼‰

```ts
<script lang="ts">
import { defineComponent, computed } from 'vue';
import {
  ParentTab,
  ChildTabA,
  ChildTabB,
  ChildTabC
} from '@/store/modules/tabModule';

export default defineComponent({
  props: {
    parent: {
      type: String as () => ParentTab,
      required: true
    },
    child: {
      type: String,
      required: true
    }
  },
  components: {
    GraphView: { template: '<div>ğŸ“Š ã‚°ãƒ©ãƒ•</div>' },
    CommentView: { template: '<div>ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆ</div>' },
    EditView: { template: '<div>âœï¸ ç·¨é›†</div>' },
    OverviewView: { template: '<div>ğŸ“‹ æ¦‚è¦</div>' },
    AlertView: { template: '<div>âš ï¸ è­¦å‘Š</div>' },
    LogView: { template: '<div>ğŸ“„ ãƒ­ã‚°</div>' },
    MapView: { template: '<div>ğŸ—º åœ°å›³</div>' }
  },
  setup(props) {
    const componentMap: Record<ParentTab, Record<string, string>> = {
      [ParentTab.A]: {
        [ChildTabA.Graph]: 'GraphView',
        [ChildTabA.Comment]: 'CommentView',
        [ChildTabA.Edit]: 'EditView'
      },
      [ParentTab.B]: {
        [ChildTabB.Overview]: 'OverviewView',
        [ChildTabB.Alert]: 'AlertView',
        [ChildTabB.Edit]: 'EditView'
      },
      [ParentTab.C]: {
        [ChildTabC.Log]: 'LogView',
        [ChildTabC.Map]: 'MapView',
        [ChildTabC.Edit]: 'EditView'
      }
    };

    const currentComponent = computed(() => {
      return componentMap[props.parent]?.[props.child] || 'div';
    });

    return { currentComponent };
  }
});
</script>
```

---

## âœ… çµæœï¼ˆãƒ¡ãƒªãƒƒãƒˆï¼‰

| é …ç›®                     | å†…å®¹                   |
| ---------------------- | -------------------- |
| `enum` ã«ã‚ˆã‚Šå®šæ•°ãƒŸã‚¹ã‚’é˜²æ­¢      | ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šæ¸›ãƒ»å‹å®‰å…¨ã«        |
| `interface` ã«ã‚ˆã‚Šæ˜ç¤ºçš„ãªå‹æ§‹é€  | ã‚¹ãƒˆã‚¢è¨­è¨ˆãŒå¯è¦–åŒ–ã•ã‚Œã‚‹         |
| æ‹¡å¼µæ€§ãŒé«˜ã„                 | ã‚¿ãƒ–ãŒå¢—ãˆã¦ã‚‚å‹ã§è¿½ãˆã‚‹ãŸã‚ä¿å®ˆæ€§ãŒè‰¯ã„ |

---

## âœ… è£œè¶³

ã•ã‚‰ã«ä»¥ä¸‹ã‚‚çµ„ã¿è¾¼ã¿å¯èƒ½ã§ã™ï¼š

* `enum` â†’ i18nå¯¾å¿œï¼ˆè¡¨ç¤ºã¯åˆ¥åã§å®šç¾©ï¼‰
* `localStorageä¿å­˜ãƒ»å¾©å…ƒæ©Ÿèƒ½`
* `router query` ã‚’ã‚¿ãƒ–çŠ¶æ…‹ã¨é€£å‹•

å¿…è¦ãŒã‚ã‚Œã°ã€ãã‚Œã«å¿œã˜ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚‚æä¾›å¯èƒ½ã§ã™ï¼
