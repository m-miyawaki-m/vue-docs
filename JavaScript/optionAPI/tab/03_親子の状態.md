äº†è§£ã§ã™ã€ã¤ã¾ã‚Šã‚ãªãŸã®è¦ä»¶ã¯ï¼š

> âœ… **ã€Œè¦ªã‚¿ãƒ–ï¼ˆä½œæˆ¦Aãƒ»Bãƒ»Cãªã©ï¼‰ãŒåˆ‡ã‚Šæ›¿ã‚ã£ã¦ã‚‚ã€å„è¦ªã‚¿ãƒ–ã”ã¨ã«å­ã‚¿ãƒ–ï¼ˆã‚°ãƒ©ãƒ•ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆãªã©ï¼‰ã®é¸æŠçŠ¶æ…‹ã‚’è¨˜æ†¶ã—ã€å†é¸æŠæ™‚ã«ãã®çŠ¶æ…‹ã‚’å¾©å…ƒã—ãŸã„ã€**

ã“ã‚Œã¯**éå¸¸ã«è‡ªç„¶ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå‹•ä½œè¨­è¨ˆ**ã§ã™ã€‚
Vuexã§ã®çŠ¶æ…‹ç®¡ç†ã§ã‚‚ã€**æ§‹é€ ã•ãˆæ˜ç¢ºã«ã™ã‚Œã°ç°¡æ½”ã«å®Ÿç¾å¯èƒ½ã§ã™ã€‚**

---

## âœ… å®Ÿç¾ã™ã‚‹ãŸã‚ã®VuexçŠ¶æ…‹è¨­è¨ˆ

### ğŸ¯ ãƒã‚¤ãƒ³ãƒˆã¯ã€Œè¦ªã‚¿ãƒ–ã”ã¨ã«å­ã‚¿ãƒ–çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹ã€ã“ã¨ï¼

```ts
// store/modules/tabModule.ts
export interface TabState {
  activeParentTab: string;
  activeChildTabs: Record<string, string>; // å„è¦ªã‚¿ãƒ–ã”ã¨ã«å­ã‚¿ãƒ–ã‚’è¨˜éŒ²
}
```

---

## âœ… 1. çŠ¶æ…‹ã®ä¾‹

```ts
state: (): TabState => ({
  activeParentTab: 'ä½œæˆ¦A',
  activeChildTabs: {
    ä½œæˆ¦A: 'ã‚°ãƒ©ãƒ•',
    ä½œæˆ¦B: 'ã‚³ãƒ¡ãƒ³ãƒˆ',
    ä½œæˆ¦C: 'ç·¨é›†',
  }
})
```

---

## âœ… 2. mutationsï¼ˆåˆ‡ã‚Šæ›¿ãˆæ™‚ã«çŠ¶æ…‹ã‚’ç¶­æŒï¼‰

```ts
mutations: {
  setParentTab(state, parent: string) {
    state.activeParentTab = parent;
    // å­ã‚¿ãƒ–ã¯ç¶­æŒã—ãŸã¾ã¾ï¼ˆåˆæœŸåŒ–ã—ãªã„ï¼‰
  },
  setChildTab(state, payload: { parent: string; child: string }) {
    state.activeChildTabs[payload.parent] = payload.child;
  }
}
```

---

## âœ… 3. gettersï¼ˆç¾åœ¨ã®å­ã‚¿ãƒ–ã‚’å–å¾—ï¼‰

```ts
getters: {
  activeChildTab(state): string {
    return state.activeChildTabs[state.activeParentTab] || '';
  }
}
```

---

## âœ… 4. Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®ä½¿ã„æ–¹

```ts
computed: {
  parentTab: {
    get() {
      return this.$store.state.tabModule.activeParentTab;
    },
    set(val) {
      this.$store.commit('tabModule/setParentTab', val);
    }
  },
  childTab: {
    get() {
      return this.$store.getters['tabModule/activeChildTab'];
    },
    set(val) {
      const parent = this.$store.state.tabModule.activeParentTab;
      this.$store.commit('tabModule/setChildTab', { parent, child: val });
    }
  }
}
```

```html
<v-tabs v-model="parentTab">...</v-tabs>
<v-tabs v-model="childTab">...</v-tabs>
```

---

## âœ… çµæœã©ã†ãªã‚‹ï¼Ÿ

| æ“ä½œ                                  | çŠ¶æ…‹ã®å‹•ã              |
| ----------------------------------- | ------------------ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œä½œæˆ¦A â†’ ã‚³ãƒ¡ãƒ³ãƒˆã€â†’ã€Œä½œæˆ¦B â†’ ã‚°ãƒ©ãƒ•ã€ã¨åˆ‡ã‚Šæ›¿ãˆã‚‹ | Vuexã«è¨˜éŒ²ã•ã‚Œã‚‹         |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå†ã³ã€Œä½œæˆ¦Aã€ã«æˆ»ã‚‹                     | å­ã‚¿ãƒ–ã¯ã€Œã‚³ãƒ¡ãƒ³ãƒˆã€ã®ã¾ã¾å¾©å…ƒã•ã‚Œã‚‹ |
| çŠ¶æ…‹ã¯å¸¸ã«Vuexå†…ã«ä¿æŒã•ã‚Œã‚‹                    | âœ… *UXçš„ã«ç›´æ„Ÿçš„ãªå‹•ä½œã‚’ç¶­æŒ*  |

---

## âœ… çµè«–

> âœ… è¦ªã‚¿ãƒ–ã”ã¨ã«å­ã‚¿ãƒ–çŠ¶æ…‹ã‚’è¨˜éŒ²ã™ã‚‹æ§‹é€ ã¯**æ­£ã—ã„**ã—ã€**Vuexã§ç°¡æ½”ã«å®Ÿè£…å¯èƒ½**ã§ã™ã€‚

ã‚€ã—ã‚ã“ã‚Œã¯ã€

* ä¿å®ˆæ€§ãŒé«˜ã„
* æ‹¡å¼µã«ã‚‚å¼·ã„ï¼ˆè¦ªã‚¿ãƒ–å¢—ãˆã¦ã‚‚å¯¾å¿œä¸è¦ï¼‰
* UXã‚‚è‰¯å¥½

ã¨ã„ã†**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹çš„ãªè¨­è¨ˆ**ã§ã™ã€‚

---

### âœ… å¿…è¦ã§ã‚ã‚Œã°

* ã“ã®æ§‹æˆã‚’ `.vue` ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ãŠæ¸¡ã—å¯èƒ½ã§ã™
* ã¾ãŸã¯ `localStorageã«ä¿å­˜ã—ã¦å¾©å…ƒã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯` ã‚‚è¿½åŠ ã§ãã¾ã™

ãŠæ°—è»½ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãã ã•ã„ã€‚


ä»¥ä¸‹ã«ã€\*\*ã‚ãªãŸã®è¦ä»¶ã«æ²¿ã£ãŸ Vuex ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆï¼ˆTypeScriptï¼‰\*\*ã‚’ã¾ã‚‹ã”ã¨æä¾›ã—ã¾ã™ã€‚

---

## âœ… ç›®çš„

* è¦ªã‚¿ãƒ–ï¼šãƒšãƒ¼ã‚¸å˜ä½ã®åˆ‡ã‚Šæ›¿ãˆï¼ˆä¾‹ï¼šä½œæˆ¦A, ä½œæˆ¦Bï¼‰
* å­ã‚¿ãƒ–ï¼šãƒšãƒ¼ã‚¸å†…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆï¼ˆä¾‹ï¼šã‚°ãƒ©ãƒ•, ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
* è¦ªã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ™‚ã«ã€**å­ã‚¿ãƒ–ã®é¸æŠçŠ¶æ…‹ã¯ä¿æŒã•ã‚Œã‚‹**

---

## ğŸ“¦ `src/store/modules/tabModule.ts`

```ts
// å‹å®šç¾©
export interface TabState {
  activeParentTab: string;
  activeChildTabs: Record<string, string>;
}

// ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
export const tabModule = {
  namespaced: true,
  state: (): TabState => ({
    activeParentTab: 'ä½œæˆ¦A', // åˆæœŸé¸æŠã•ã‚Œã‚‹è¦ªã‚¿ãƒ–
    activeChildTabs: {
      ä½œæˆ¦A: 'ã‚°ãƒ©ãƒ•',
      ä½œæˆ¦B: 'ã‚³ãƒ¡ãƒ³ãƒˆ',
      ä½œæˆ¦C: 'ç·¨é›†'
    }
  }),

  mutations: {
    /**
     * è¦ªã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼ˆå­ã‚¿ãƒ–ã¯åˆæœŸåŒ–ã—ãªã„ï¼‰
     */
    setParentTab(state: TabState, parent: string) {
      state.activeParentTab = parent;
    },

    /**
     * å­ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼ˆè¦ªã‚¿ãƒ–ã”ã¨ã«è¨˜æ†¶ï¼‰
     */
    setChildTab(state: TabState, payload: { parent: string; child: string }) {
      state.activeChildTabs[payload.parent] = payload.child;
    }
  },

  getters: {
    /**
     * ç¾åœ¨ã®è¦ªã‚¿ãƒ–ã«å¯¾å¿œã™ã‚‹å­ã‚¿ãƒ–åã‚’å–å¾—
     */
    activeChildTab(state: TabState): string {
      return state.activeChildTabs[state.activeParentTab] || '';
    }
  }
};
```

---

## ğŸ”§ ã‚¹ãƒˆã‚¢ã«ç™»éŒ²ï¼ˆä¾‹ï¼š`src/store/index.ts`ï¼‰

```ts
import { createStore } from 'vuex';
import { tabModule } from './modules/tabModule';

export default createStore({
  modules: {
    tabModule
  }
});
```

---

## âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã®åˆ©ç”¨ä¾‹ï¼ˆè¦ªãƒ»å­ã‚¿ãƒ–ä¸¡æ–¹ï¼‰

```ts
computed: {
  parentTab: {
    get() {
      return this.$store.state.tabModule.activeParentTab;
    },
    set(val: string) {
      this.$store.commit('tabModule/setParentTab', val);
    }
  },
  childTab: {
    get() {
      return this.$store.getters['tabModule/activeChildTab'];
    },
    set(val: string) {
      const parent = this.$store.state.tabModule.activeParentTab;
      this.$store.commit('tabModule/setChildTab', { parent, child: val });
    }
  }
}
```

```html
<!-- è¦ªã‚¿ãƒ–ï¼ˆä½œæˆ¦ï¼‰ -->
<v-tabs v-model="parentTab">
  <v-tab v-for="name in ['ä½œæˆ¦A', 'ä½œæˆ¦B', 'ä½œæˆ¦C']" :key="name">{{ name }}</v-tab>
</v-tabs>

<!-- å­ã‚¿ãƒ–ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ -->
<v-tabs v-model="childTab">
  <v-tab v-for="name in ['ã‚°ãƒ©ãƒ•', 'ã‚³ãƒ¡ãƒ³ãƒˆ', 'ç·¨é›†']" :key="name">{{ name }}</v-tab>
</v-tabs>
```

---

## âœ… å‚™è€ƒ

* å¿…è¦ã«å¿œã˜ã¦ `localStorage` ã§å¾©å…ƒå¯èƒ½ãªã‚ˆã†ã« `plugin` ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½
* å­ã‚¿ãƒ–æ§‹æˆãŒè¦ªã‚¿ãƒ–ã”ã¨ã«ç•°ãªã‚‹å ´åˆã¯ã€`tabOptionsMap[parent]` ã§ç®¡ç†å¯èƒ½
* çŠ¶æ…‹ã‚’ `router` ã®ã‚¯ã‚¨ãƒªã«åæ˜ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½

---

å¿…è¦ã§ã‚ã‚Œã°ã“ã® `.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã¨ `.vue` ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ãƒ‘ãƒƒã‚¯ã—ãŸæ§‹æˆã‚‚ãŠæ¸¡ã—ã§ãã¾ã™ã€‚
ã”å¸Œæœ›ã‚ã‚Œã°ã€Œå­ã‚¿ãƒ–æ§‹æˆãŒè¦ªã«ã‚ˆã£ã¦é•ã†ã€ãªã©ã‚‚å¯¾å¿œå¯èƒ½ã§ã™ã€‚
