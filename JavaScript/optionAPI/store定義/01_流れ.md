Vuexã«ãŠã‘ã‚‹ `state â†’ getter â†’ mutation â†’ action` ã®æµã‚Œã¯ã€\*\*çŠ¶æ…‹ç®¡ç†ã®åŸºæœ¬çš„ãªã€Œèª­ã¿æ›¸ãã®æµã‚Œã€\*\*ã‚’ç†è§£ã™ã‚‹ä¸Šã§éå¸¸ã«é‡è¦ã§ã™ã€‚ä»¥ä¸‹ã«ã€é †ã‚’è¿½ã£ã¦ä½“ç³»çš„ã«èª¬æ˜ã—ã¾ã™ã€‚

---

## âœ… 1. `state`: ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹**çŠ¶æ…‹ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰**

`state` ã¯ Vuex ã‚¹ãƒˆã‚¢ãŒä¿æŒã™ã‚‹ã€Œå˜ä¸€ã®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºï¼ˆSSoTï¼‰ã€ã§ã™ã€‚

```ts
state: {
  count: 0
}
```

* è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šã®ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†
* ç›´æ¥å¤‰æ›´ã—ã¦ã¯ã„ã‘ãªã„ï¼ˆ`mutation`çµŒç”±ã§ï¼‰

---

## âœ… 2. `getter`: çŠ¶æ…‹ã®**è¨ˆç®—å‡¦ç†ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**

`getter` ã¯ `state` ã‹ã‚‰æ´¾ç”Ÿã—ãŸãƒ‡ãƒ¼ã‚¿ï¼ˆcomputed çš„ãªã‚‚ã®ï¼‰ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚

```ts
getters: {
  doubleCount: (state) => state.count * 2
}
```

* Vue ã® `computed` ã¨åŒã˜ã‚¤ãƒ¡ãƒ¼ã‚¸
* ä»–ã® `getter` ã‚’ `getters` å¼•æ•°ã§å‘¼ã¹ã‚‹

---

## âœ… 3. `mutation`: çŠ¶æ…‹ã‚’**åŒæœŸçš„ã«å¤‰æ›´ã™ã‚‹é–¢æ•°**

Vuex ã® state ã‚’ç›´æ¥å¤‰æ›´ã§ãã‚‹**å”¯ä¸€ã®å ´æ‰€**ã§ã™ã€‚éåŒæœŸå‡¦ç†ã¯ç¦æ­¢ã€‚

```ts
mutations: {
  increment(state, payload: number) {
    state.count += payload;
  }
}
```

* `commit('increment', 1)` ã§å‘¼ã³å‡ºã—
* ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åã§ãƒ­ã‚°ã‚„ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãŒå¯èƒ½ï¼ˆãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ã„ï¼‰

---

## âœ… 4. `action`: éåŒæœŸå‡¦ç†ã‚„ãƒ­ã‚¸ãƒƒã‚¯ â†’ `mutation` ã‚’å‘¼ã¶

éåŒæœŸå‡¦ç†ï¼ˆä¾‹ï¼šAPIé€šä¿¡ï¼‰ã‚„è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’ã“ã“ã«æ›¸ãã€`mutation`ã‚’é€šã˜ã¦`state`ã‚’æ›´æ–°ã—ã¾ã™ã€‚

```ts
actions: {
  async fetchAndIncrement({ commit }) {
    const result = await fetch('/api/count');
    const value = await result.json();
    commit('increment', value);
  }
}
```

* `dispatch('fetchAndIncrement')` ã§å‘¼ã³å‡ºã—
* `commit()` ã‚’ä½¿ã£ã¦çŠ¶æ…‹ã‚’å¤‰ãˆã‚‹
* Promiseã‚’è¿”ã™ãŸã‚ã€å‘¼ã³å‡ºã—å…ƒã§ã‚‚ `.then()` å¯èƒ½

---

## ğŸ§­ æµã‚Œã®å…¨ä½“å›³ï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼‰

```plaintext
1. UIã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿï¼ˆä¾‹ï¼šãƒœã‚¿ãƒ³æŠ¼ä¸‹ï¼‰
        â†“
2. Action ã‚’ dispatchï¼ˆéåŒæœŸå‡¦ç†ãŒã‚ã‚‹ãªã‚‰ã“ã“ï¼‰
        â†“
3. Action å†…ã§ Mutation ã‚’ commit
        â†“
4. Mutation ãŒ state ã‚’æ›´æ–°
        â†“
5. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ computed çµŒç”±ã§ getter / state ã‚’å†å–å¾—
        â†“
6. å†æç”»ï¼ˆVue ã®ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿæ§‹ã«ã‚ˆã‚Šè‡ªå‹•ï¼‰
```

---

## ğŸ“ è£œè¶³ï¼šå®Ÿè£…ä¾‹ï¼ˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ï¼‰

```ts
// store/modules/counter.ts
export default {
  namespaced: true,
  state: () => ({
    count: 0
  }),
  getters: {
    double(state) {
      return state.count * 2;
    }
  },
  mutations: {
    increment(state, n: number) {
      state.count += n;
    }
  },
  actions: {
    async incrementFromAPI({ commit }) {
      const n = await fetchSomeCount(); // ä¾‹: APIå‘¼ã³å‡ºã—
      commit('increment', n);
    }
  }
}
```

```ts
// ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ï¼ˆOption APIï¼‰
this.$store.dispatch('counter/incrementFromAPI');
```

---

## ğŸ§© ãƒã‚¤ãƒ³ãƒˆã¾ã¨ã‚

| æ¦‚å¿µ       | å†…å®¹           | å‚™è€ƒ               |
| -------- | ------------ | ---------------- |
| state    | å…±æœ‰ãƒ‡ãƒ¼ã‚¿        | ç›´æ¥å¤‰æ›´ã—ãªã„          |
| getter   | stateã®æ´¾ç”Ÿãƒ‡ãƒ¼ã‚¿  | è¨ˆç®—ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã«ä½¿ã†      |
| mutation | åŒæœŸçš„ãªçŠ¶æ…‹å¤‰æ›´å‡¦ç†   | `commit()` ã§å®Ÿè¡Œ   |
| action   | éåŒæœŸå‡¦ç†ãƒ»ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ | `dispatch()` ã§å®Ÿè¡Œ |

---

å¿…è¦ã§ã‚ã‚Œã°ã“ã®æµã‚Œã«æ²¿ã£ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã‚„ã€UIé€£å‹•ã®å…·ä½“ä¾‹ï¼ˆãƒ•ã‚©ãƒ¼ãƒ é€£æºãªã©ï¼‰ã‚‚æä¾›å¯èƒ½ã§ã™ï¼
