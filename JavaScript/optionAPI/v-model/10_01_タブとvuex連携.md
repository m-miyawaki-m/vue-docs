ã¯ã„ã€ãã®ã‚ˆã†ãªã€Œ**å‹•çš„ãªã‚¿ãƒ–ç”Ÿæˆãƒ»åˆ‡ã‚Šæ›¿ãˆè¡¨ç¤º**ã€ã®è¦ä»¶ã§ã¯ã€Vuexã§çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã®ãŒ**ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**ã§ã™ã€‚ç‰¹ã«æ¬¡ã®ã‚ˆã†ãªç†ç”±ã‹ã‚‰ã§ã™ï¼š

---

## âœ… Vuex ã§ã‚¿ãƒ–çŠ¶æ…‹ã‚’ç®¡ç†ã™ã¹ãç†ç”±

| ç†ç”±                   | å†…å®¹                              |
| -------------------- | ------------------------------- |
| ğŸ” åŒæ–¹å‘ã®åˆ‡ã‚Šæ›¿ãˆç®¡ç†        | é–‹ã„ã¦ã„ã‚‹ã‚¿ãƒ–ãƒ»ç¾åœ¨é¸æŠä¸­ã®ã‚¿ãƒ–ã‚’ä¸€å…ƒç®¡ç†ã§ãã‚‹        |
| ğŸ§© ä»–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨é€£æºå¯èƒ½     | ä»–ã®ãƒšãƒ¼ã‚¸ã‚„ UI ã¨åŒæœŸã—ã¦ã‚¿ãƒ–ã‚’åˆ¶å¾¡ã§ãã‚‹         |
| ğŸ’¾ æ°¸ç¶š or ä¸€æ™‚ä¿æŒã®åˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ | ä¸€æ™‚çš„ãªã‚¿ãƒ–æƒ…å ±ã‚‚ Vuex ã§ä¿æŒã—ã¦ãŠã‘ã°å†è¡¨ç¤ºãŒã‚¹ãƒ ãƒ¼ã‚º |
| âœ… ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ã„       | çŠ¶æ…‹ã‚’ Vuex ã«é›†ç´„ã™ã‚‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ãŒè¦‹ãˆã‚„ã™ããªã‚‹     |

---

## âœ… å®Ÿè£…ã®åŸºæœ¬æ–¹é‡ï¼ˆOption APIå‰æï¼‰

### çŠ¶æ…‹ã¨ã—ã¦ç®¡ç†ã™ã‚‹ã‚‚ã®ï¼š

1. `tabs`: é–‹ã„ã¦ã„ã‚‹ã‚¿ãƒ–ã®ãƒªã‚¹ãƒˆï¼ˆä¾‹ï¼š`[{ id: 1, title: "A" }, ...]`ï¼‰
2. `activeTabId`: ç¾åœ¨é¸æŠä¸­ã®ã‚¿ãƒ–ã® ID

---

### ğŸ”¹ Vuex ã‚¹ãƒˆã‚¢æ§‹æˆä¾‹ï¼ˆ`store/modules/tab.ts`ï¼‰

```ts
interface TabInfo {
  id: string
  title: string
}

export const tabModule = {
  namespaced: true,
  state: (): {
    tabs: TabInfo[]
    activeTabId: string
  } => ({
    tabs: [],
    activeTabId: ''
  }),

  mutations: {
    setTabs(state, tabs: TabInfo[]) {
      state.tabs = tabs
    },
    addTab(state, tab: TabInfo) {
      if (!state.tabs.some(t => t.id === tab.id)) {
        state.tabs.push(tab)
      }
      state.activeTabId = tab.id
    },
    setActiveTab(state, id: string) {
      state.activeTabId = id
    },
    closeTab(state, id: string) {
      state.tabs = state.tabs.filter(t => t.id !== id)
      if (state.activeTabId === id && state.tabs.length > 0) {
        state.activeTabId = state.tabs[0].id
      }
    }
  }
}
```

---

### ğŸ”¹ è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ`MainTabs.vue`ï¼‰

```vue
<template>
  <v-tabs v-model="activeTabId">
    <v-tab v-for="tab in tabs" :key="tab.id" :value="tab.id">
      {{ tab.title }}
    </v-tab>
  </v-tabs>

  <v-window v-model="activeTabId">
    <v-window-item
      v-for="tab in tabs"
      :key="tab.id"
      :value="tab.id"
    >
      <p>{{ tab.title }} ã®å†…å®¹</p>
    </v-window-item>
  </v-window>
</template>

<script lang="ts">
import { defineComponent } from 'vue'
import { mapState, mapMutations } from 'vuex'

export default defineComponent({
  computed: {
    ...mapState('tab', ['tabs', 'activeTabId']),
    activeTabId: {
      get() {
        return this.$store.state.tab.activeTabId
      },
      set(val) {
        this.setActiveTab(val)
      }
    }
  },
  methods: {
    ...mapMutations('tab', ['setActiveTab'])
  }
})
</script>
```

---

### ğŸ”¹ åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆä¾‹ï¼šãƒšãƒ¼ã‚¸é·ç§»æ™‚ãªã©ï¼‰

```ts
// ãƒšãƒ¼ã‚¸ã«å¿…è¦ãªã‚¿ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã« Vuex ã«æ¸¡ã™
this.$store.commit('tab/setTabs', [
  { id: 'user1', title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼1' },
  { id: 'user2', title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼2' }
])
```

---

## âœ… å¿œç”¨ãƒã‚¤ãƒ³ãƒˆ

| ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹        | å¯¾å¿œæ–¹é‡                               |
| ------------- | ---------------------------------- |
| ã‚¿ãƒ–ã«Ã—ãƒœã‚¿ãƒ³ã§å‰Šé™¤    | `closeTab` ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†             |
| é¸æŠã‚¿ãƒ–ã§å†…å®¹åˆ‡ã‚Šæ›¿ãˆ   | `v-window` ã‚„ `v-if` ã§åˆ‡ã‚Šæ›¿ãˆè¡¨ç¤º        |
| ã‚¿ãƒ–ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿ä¿æŒãƒ»æ›´æ–° | `tabs: { id, title, data }` ã§æƒ…å ±ã‚’ä¿æŒ |

---

## âœ… çµè«–ï¼šVuexã§ã®ã‚¿ãƒ–ç®¡ç†ã¯â—

* å˜ç´”ãªåˆ‡ã‚Šæ›¿ãˆã ã‘ãªã‚‰ãƒ­ãƒ¼ã‚«ãƒ« `data()` ã§ã‚‚å¯
* ã—ã‹ã—ã€Œè¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ã‚¿ãƒ–å‹•çš„ç”Ÿæˆãƒ»é¸æŠãƒ»å‰Šé™¤ãƒ»ä¿å­˜ã€ãªã©ãŒã‚ã‚‹å ´åˆã¯ **Vuex ãŒæœ€é©**

---

> ã”å¸Œæœ›ã§ã‚ã‚Œã°ã€ã‚¿ãƒ–ç®¡ç†ç”¨ Vuex ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆã® `.vue` ãƒ•ã‚¡ã‚¤ãƒ«ã‚»ãƒƒãƒˆã‚‚ç”Ÿæˆã§ãã¾ã™ã€‚å¿…è¦ã§ã™ã‹ï¼Ÿ

äº†è§£ã—ã¾ã—ãŸã€‚
ã‚ãªãŸã®è¦ä»¶ã¯ï¼š

> ğŸ”¸ JSONã§èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã«å¿œã˜ã¦ã‚¿ãƒ–ã®è¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„
>
> * ãƒ‡ãƒ¼ã‚¿ãŒè¤‡æ•° â†’ è¤‡æ•°ã‚¿ãƒ–ç”Ÿæˆ
> * å˜ä¸€ãƒ‡ãƒ¼ã‚¿ â†’ ã‚¿ãƒ–1å€‹ã®ã¿ç”Ÿæˆ
> * ç©ºãƒ‡ãƒ¼ã‚¿ â†’ ã‚¿ãƒ–éè¡¨ç¤ºã¾ãŸã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€è¡¨ç¤º

ã“ã®è¦ä»¶ã«å¯¾å¿œã™ã‚‹æ§‹æˆã‚’ä»¥ä¸‹ã«**Vuex + Option APIå‰æã§è¨­è¨ˆã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æˆã¨å‡¦ç†ä¾‹**ã§æç¤ºã—ã¾ã™ã€‚

---

## âœ… 1. JSONæ§‹é€ ã®å‰æï¼ˆä¾‹ï¼‰

```json
[
  { "id": "p1", "title": "ãƒšãƒ¼ã‚¸1", "content": "å†…å®¹A" },
  { "id": "p2", "title": "ãƒšãƒ¼ã‚¸2", "content": "å†…å®¹B" }
]
```

---

## âœ… 2. Vuex ã‚¹ãƒˆã‚¢ï¼ˆmodules/tab.tsï¼‰

```ts
interface TabPage {
  id: string
  title: string
  content: string
}

export const tabModule = {
  namespaced: true,
  state: (): {
    tabs: TabPage[]
    activeTabId: string
  } => ({
    tabs: [],
    activeTabId: ''
  }),
  mutations: {
    setTabs(state, tabs: TabPage[]) {
      state.tabs = tabs
      state.activeTabId = tabs.length > 0 ? tabs[0].id : ''
    },
    setActiveTab(state, id: string) {
      state.activeTabId = id
    }
  }
}
```

---

## âœ… 3. ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å‡¦ç†ï¼ˆ`MainTabs.vue` å†…ã® mounted ãªã©ï¼‰

```ts
methods: {
  async loadJsonTabs() {
    // ãƒ‡ãƒ¢ç”¨ï¼šå®Ÿéš›ã¯ API or ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
    const response = await fetch('/data/tabs.json')
    const data = await response.json() // â† Array or Empty

    if (Array.isArray(data) && data.length > 0) {
      this.$store.commit('tab/setTabs', data)
    } else {
      this.$store.commit('tab/setTabs', []) // ã‚¿ãƒ–ãªã—
    }
  }
},
mounted() {
  this.loadJsonTabs()
}
```

---

## âœ… 4. `MainTabs.vue` ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆOption APIï¼‰

```vue
<template>
  <div v-if="tabs.length">
    <v-tabs v-model="activeTabId">
      <v-tab v-for="tab in tabs" :key="tab.id" :value="tab.id">
        {{ tab.title }}
      </v-tab>
    </v-tabs>

    <v-window v-model="activeTabId">
      <v-window-item
        v-for="tab in tabs"
        :key="tab.id"
        :value="tab.id"
      >
        <p>{{ tab.content }}</p>
      </v-window-item>
    </v-window>
  </div>
  <div v-else class="pa-4 text-grey">
    ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“
  </div>
</template>

<script lang="ts">
import { defineComponent } from 'vue'
import { mapState, mapMutations } from 'vuex'

export default defineComponent({
  computed: {
    ...mapState('tab', ['tabs', 'activeTabId']),
    activeTabId: {
      get() {
        return this.$store.state.tab.activeTabId
      },
      set(val) {
        this.setActiveTab(val)
      }
    }
  },
  methods: {
    ...mapMutations('tab', ['setActiveTab']),
    async loadJsonTabs() {
      const res = await fetch('/data/tabs.json')
      const data = await res.json()
      this.$store.commit('tab/setTabs', Array.isArray(data) ? data : [])
    }
  },
  mounted() {
    this.loadJsonTabs()
  }
})
</script>
```

---

## âœ… 5. æƒ³å®šã•ã‚Œã‚‹ç”»é¢ãƒ‘ã‚¿ãƒ¼ãƒ³

| èª­ã¿è¾¼ã‚“ã  JSONã®çŠ¶æ…‹ | è¡¨ç¤ºã‚¿ãƒ–                | è¡¨ç¤ºUI                    |
| ------------- | ------------------- | ----------------------- |
| 3ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚ã‚Š      | `ã‚¿ãƒ–1`, `ã‚¿ãƒ–2`, `ã‚¿ãƒ–3` | è¤‡æ•°ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆç”»é¢              |
| 1ä»¶ã®ã¿          | `ã‚¿ãƒ–1`ï¼ˆ1ã¤ã ã‘ï¼‰         | å˜ä¸€ã‚¿ãƒ–ï¼ˆé–‰ã˜ã‚Œãªã„ãªã©å·¥å¤«å¯ï¼‰        |
| ç©º or null     | ã‚¿ãƒ–ãªã—                | ã€Œãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€ãªã©ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€è¡¨ç¤º |

---

## âœ… æ‹¡å¼µå¯¾å¿œã‚¢ã‚¤ãƒ‡ã‚¢

* ğŸ” å†èª­ã¿è¾¼ã¿ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ï¼‰
* âœ– ã‚¿ãƒ–å‰Šé™¤å¯¾å¿œï¼ˆ`closeTab` ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ï¼‰
* ğŸ’¾ `localStorage` ã«ä¿å­˜ã—ã¦å¾©å…ƒ

---

å¿…è¦ã§ã‚ã‚Œã°ã€ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€å¼ã‚’ `.vue` ã¨ `store/modules/tab.ts` ã‚»ãƒƒãƒˆã§æä¾›ã§ãã¾ã™ã€‚ã”å¸Œæœ›ã§ã™ã‹ï¼Ÿ
